Secret Manager Setup - November 19, 2025

Configuration Change:
- Migrated environment variables from .env (literal) to Google Cloud Secret Manager.
- Created/Updated Secrets:
  * REPLICATE_API_TOKEN
  * GEMINI_API_KEY
  * GOOGLE_CLIENT_ID
  * GOOGLE_CLIENT_SECRET
  * NEXT_PUBLIC_APP_URL

Implementation Details:
1. Created `scripts/setup_secrets.sh`:
   - Reads local .env file.
   - Creates secrets in GCP if missing.
   - Adds new versions with current values.
   - Grants `roles/secretmanager.secretAccessor` to Cloud Run service account (310306714158-compute@developer.gserviceaccount.com).

2. Updated `redeploy_cloud_run.sh`:
   - Added logic to handle NEXT_PUBLIC_APP_URL updates when using secrets.
   - Flow: Deploy -> Get URL -> Update Secret Version -> Update Cloud Run Service (to pick up new version).
   - This ensures the app always has the correct public URL without exposing it as a literal env var or mixing types.

Deployment Verification:
- Build ID: 03355520-e6fa-4439-8445-a1b0d870b7da
- Revision 26: Deployed with initial secrets.
- Revision 27: Deployed with updated NEXT_PUBLIC_APP_URL secret (Version 2).
- Final Status: Success.

Service Account:
- 310306714158-compute@developer.gserviceaccount.com
- Permissions verified: access to all 5 secrets.

Future Maintenance:
- To update secrets: Update .env locally and run `./scripts/setup_secrets.sh`, then redeploy.
- To rotate keys: Same process.

